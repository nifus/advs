<div id="mail-templates" ng-if="!env.loading">
    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading" translate>Mailing - Template</div>
            <div class="panel-body">
                <div class="row">

                    <div class="col-md-2 titles">

                        <div class="row header">
                            <div class="col-md-6 desc" translate>Mail type</div>
                            <div class="col-md-6 type" translate>System</div>
                        </div>

                        <div class="list-group">
                            <a ng-repeat="template in env.templates|filter:{type:'system'}" ng-class="{'active':env.template.id==template.id}" ng-click="displayTemplate(template)" class="list-group-item link">{{template.name}}</a>

                        </div>

                        <div class="row header">
                            <div class="col-md-6 desc" translate>Mail type</div>
                            <div class="col-md-6 type" translate>Info</div>
                        </div>

                        <div class="list-group">
                            <a ng-repeat="template in env.templates|filter:{type:'info'}"
                               ng-click="displayTemplate(template)" class="link list-group-item " ng-class="{'active':env.template.id==template.id}">{{template.name}}</a>

                        </div>

                    </div>
                    <div class="col-md-3" ng-if="env.template">
                        <table class="table">
                            <tr ng-repeat="variable in env.using_variables">
                                <td>[{{variable.title}}]</td>
                                <td>{{variable.desc}}</td>
                            </tr>
                        </table>



                    </div>

                    <div class="col-md-7 " ng-if="env.template">


                        <div class="form-group">
                            <input type="text" class="form-control" ng-model="env.template.header">
                        </div>
                        <div class="form-group">
                            <textarea class="form-control" ng-model="env.template.MailTemplate"></textarea>
                        </div>

                        <hr>
                        <div class="alert alert-info" ng-if="env.display_template" ng-bind-html="env.template_text|to_trusted"></div>

                        <table class="information">
                            <tr>
                                <td translate>Last edited:</td>
                                <td>{{env.template.user.name}} {{env.template.user.surname}}</td>
                                <td  rowspan="2" class="text-right">
                                    <div class="btn-group" >
                                        <button class="btn btn-success" translate ng-click="previewTemplate(env.template.MailTemplate)">Preview</button>
                                        <button class="btn btn-primary" translate ng-click="saveTemplate()">Save</button>
                                    </div>
                                </td>
                            <tr>
                                <td translate>Edited on:</td>
                                <td>{{env.template.updated_at}}</td>
                            </tr>

                        </table>


                    </div>
                </div>


            </div>
        </div>
    </div>

</div>


<div class="progress" ng-if="env.loading">
    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
        <span class="sr-only">45% Complete</span>
    </div>
</div>
