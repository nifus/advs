<div id="help-desk">
    <div class="col-md-12" ng-if="!env.user">
        <div class="panel panel-default">
            <div class="panel-heading" translate>Search accounts</div>
            <div class="panel-body">
                <form class="form-horizontal">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Account ID</label>
                                <div class="col-sm-9">
                                    <input type="number" ng-model="filter.id" class="form-control">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Company name</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.company" class="form-control">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Register ID</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.commercial_id" class="form-control">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Email address</label>
                                <div class="col-sm-9">
                                    <input type="email" ng-model="filter.email" class="form-control">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Zip</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.address_zip" class="form-control">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>City</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.address_city" class="form-control">
                                </div>
                            </div>

                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate
                                       style="    text-align: left;">Country</label>
                                <div class="col-sm-9">
                                    <select class="form-control" ng-model="filter.commercial_country"
                                            ng-options="country as country for country in env.countries">
                                        <option value="" translate>Select country</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-12">
                                    <label class="control-label" translate>Account Type</label>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.group_id"
                                                   checklist-value="2">{{'Private'|translate}}
                                        </label>
                                    </div>

                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.group_id"
                                                   checklist-value="3">{{'Business'|translate}}
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-9">
                                    <label class="control-label" translate>Account status</label>


                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.status"
                                                   checklist-value="'active'">{{'Active'|translate}}
                                        </label>
                                    </div>

                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.status"
                                                   checklist-value="'email_confirmation'">{{'Email
                                            confirmation'|translate}}
                                        </label>
                                    </div>

                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.status"
                                                   checklist-value="'wait_approve'">{{'Wait for approve'|translate}}
                                        </label>
                                    </div>

                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.status"
                                                   checklist-value="'blocked'">{{'Blocked'|translate}}
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Forename</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.name" class="form-control">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Surname</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.surname" class="form-control">
                                </div>
                            </div>


                        </div>

                        <div class="col-md-2">

                            <div class="btn-group" role="group" aria-label="...">
                                <button type="button" class="btn btn-primary" ng-click="search(filter)" translate>
                                    Search
                                </button>
                                <button type="button" class="btn btn-primary" ng-click="reset()" translate>Reset
                                    filter
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row text-right" style="margin-bottom:10px">
                        <div class="col-md-12">
                            <div class="btn-group " role="group" aria-label="...">
                                <button type="button" class="btn btn-default" disabled translate>Results per page
                                </button>
                                <button type="button" class="btn"
                                        ng-class="{'btn-primary': env.per_page==10,'btn-default': env.per_page!=10}"
                                        ng-click="setPerPage(10)">10
                                </button>
                                <button type="button" class="btn"
                                        ng-class="{'btn-primary': env.per_page==20,'btn-default': env.per_page!=20}"
                                        ng-click="setPerPage(20)">20
                                </button>
                                <button type="button" class="btn"
                                        ng-class="{'btn-primary': env.per_page==40,'btn-default': env.per_page!=40}"
                                        ng-click="setPerPage(40)">40
                                </button>
                            </div>
                        </div>
                    </div>
                </form>

                <hr>
                <div class="progress" ng-if="env.loading==true">
                    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45"
                         aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                        <span class="sr-only"></span>
                    </div>
                </div>
                <table class="table" ng-if="env.loading==false">
                    <tr>
                        <th></th>
                        <th translate>Account ID</th>
                        <th translate>Account type</th>
                        <th translate>Status</th>
                        <th translate>Email address</th>
                        <th translate>Company name</th>
                        <th translate>Contact person</th>
                        <th translate>Created</th>
                    </tr>
                    <tr ng-repeat="user in env.users">
                        <td><input type="checkbox" checklist-model="env.selected" checklist-value="user"></td>
                        <td><a ng-click="setUser(user)" class="link">{{user.id}}</a></td>
                        <td>
                            <span ng-if="user.group_id==2" translate>Private</span>
                            <span ng-if="user.group_id==3" translate>Business</span>
                        </td>
                        <td>
                            <span ng-if="user.status=='active'" translate>Active</span>
                            <span ng-if="user.status=='wait_approve'" translate>Wait for approve</span>
                            <span ng-if="user.status=='blocked'" translate>Blocked</span>
                            <span ng-if="user.status=='email_confirmation'" translate>Email confirmation</span>
                        </td>
                        <td>{{user.email}}</td>
                        <td>{{user.company}}</td>
                        <td>{{user.surname}} {{user.name}}</td>
                        <td>{{user.CreateDateWithTime}}</td>
                    </tr>
                </table>


                <hr>
                <div class="row">
                    <div class="col-md-3 text-left">
                        <button type="button" class="btn btn-primary" ng-disabled="env.selected.length==0"
                                ng-click="activateSelectedAccounts()" translate>Activate
                        </button>
                    </div>

                    <div class="col-md-6">
                        <nav aria-label="Page navigation">
                            <ul class="pagination">
                                <li ng-repeat="n in range(1,env.pages)"
                                    ng-class="{'active':env.page==n}">
                                    <a class="link" ng-click="setPage(n)">{{n}}</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <div class="col-md-3  text-right form-inline">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" ng-model="env.blocked_flag" ng-true-value="1" ng-false-value="0">Activate
                                deletion
                            </label>
                        </div>
                        <button ng-click="deleteSelectedAccounts()"
                                ng-disabled="env.blocked_flag!=1 || env.selected.length==0" style="margin-left:20px"
                                type="button" class="btn btn-primary" translate>Delete
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <div class="col-md-12" ng-if="env.user">
        <div class="panel panel-default">
            <div class="panel-heading" style="height:40px">
                <div class="col-md-6  text-left" translate>
                    Account details
                </div>
                <div class="col-md-6 text-right">
                    <button class="btn btn-primary" ng-click="close()" translate>Close</button>
                </div>

            </div>
            <div class="panel-body">
                <div>

                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" role="tablist">
                        <li role="presentation" ng-class="{'active':env.tab=='main'}">
                            <a class="link" ng-click="env.tab='main'" translate>Main</a></li>
                        <li role="presentation" ng-class="{'active':env.tab=='advs'}">
                            <a class="link" ng-click="env.tab='advs'" translate>Adverts</a></li>
                        <li role="presentation" ng-class="{'active':env.tab=='payment'}">
                            <a class="link" ng-click="env.tab='payment'" translate> Payment</a>
                        </li>
                        <li role="presentation" ng-class="{'active':env.tab=='history'}">
                            <a class="link" ng-click="env.tab='history'" translate>History</a></li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content" style="padding: 5px">
                        <div role="tabpanel" class="tab-pane active" ng-if="env.tab=='main'">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Account ID</strong></div>
                                        <div class="col-md-6 text-right">{{env.user.id}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Account type</strong></div>
                                        <div class="col-md-6 text-right">
                                            <span ng-if="env.user.group_id==2" translate>Private</span>
                                            <span ng-if="env.user.group_id==3" translate>Business</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Status</strong></div>
                                        <div class="col-md-6 text-right">
                                            <span ng-if="env.user.status=='active'" translate>Active</span>
                                            <span ng-if="env.user.status=='wait_approve'"
                                                  translate>Wait for approve</span>
                                            <span ng-if="env.user.status=='blocked'" translate>Blocked</span>
                                            <span ng-if="env.user.status=='email_confirmation'" translate>Email confirmation</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Login email</strong></div>
                                        <div class="col-md-6 text-right">{{env.user.email}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Created on:</strong></div>
                                        <div class="col-md-6 text-right">{{env.user.CreateDateWithTime}}</div>
                                    </div>
                                    <!--<div class="row">
                                        <div class="col-md-6 text-left"><strong translate>AGB accepted:</strong></div>
                                        <div class="col-md-6 text-right">{{env.user.CreateDateWithTime}}</div>
                                    </div>-->
                                    <div class="row">
                                        <div class="col-md-6 text-left">
                                            <div class="checkbox">
                                                <label>
                                                    <input type="checkbox" ng-model="env.block_this_account_flag"
                                                           ng-true-value="1" ng-false-value="0"> Block this account
                                                </label>
                                            </div>

                                        </div>
                                        <div class="col-md-6 text-right">
                                            <button ng-disabled="env.block_this_account_flag!='1'"
                                                    class="btn btn-danger" translate>Block this account
                                            </button>
                                        </div>
                                        <div class="col-md-12">
                                            <textarea class="form-control" ng-model="env.user.blocked_message"
                                                      ng-disabled="env.block_this_account_flag!='1'">

                                            </textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">

                                    <div class="panel panel-primary">
                                        <div class="panel-heading">
                                            <h3 class="panel-title" translate>Company data</h3>
                                        </div>
                                        <div class="panel-body form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label" translate>Company name</label>
                                                <div class="col-sm-10">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.company">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left" translate>Commercial
                                                    register ID</label>
                                                <div class="col-sm-10">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.commercial_id">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left"
                                                       translate>Website</label>
                                                <div class="col-sm-10">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.website">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left" translate>Street / House
                                                    No.</label>
                                                <div class="col-sm-10 form-inline">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.address_street">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.address_number">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left" translate>Zip /
                                                    City</label>
                                                <div class="col-sm-10 form-inline">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.address_zip">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.address_city">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left" translate>Additional
                                                    address</label>
                                                <div class="col-sm-10 form-inline">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.address_additional">

                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left"
                                                       translate>Country</label>
                                                <div class="col-sm-10">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.commercial_country">

                                                </div>
                                            </div>

                                        </div>
                                    </div>


                                    <div class="panel panel-primary">
                                        <div class="panel-heading">
                                            <h3 class="panel-title" translate>Contact data</h3>
                                        </div>
                                        <div class="panel-body form-horizontal">
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label" translate>Title</label>
                                                <div class="col-sm-10">
                                                    <label class="radio-inline">
                                                        <input type="radio" ng-disabled="env.edititable==false"
                                                               ng-model="env.user.sex" value="male">
                                                        {{'Mister'|translate}}
                                                    </label>
                                                    <label class="radio-inline">
                                                        <input type="radio" ng-disabled="env.edititable==false"
                                                               ng-model="env.user.sex" value="female">
                                                        {{'Miss'|translate}}
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left"
                                                       translate>Forename</label>
                                                <div class="col-sm-10">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.name">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left"
                                                       translate>Surname</label>
                                                <div class="col-sm-10">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.surname">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left" translate>Email
                                                    address</label>
                                                <div class="col-sm-10">
                                                    <input type="email" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.contact_email">
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-2 control-label text-left" translate>Phone
                                                    number</label>
                                                <div class="col-sm-10">
                                                    <input type="text" ng-disabled="env.edititable==false"
                                                           class="form-control" ng-model="env.user.phone">
                                                </div>
                                            </div>


                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-2">
                                    <button class="btn btn-default" translate ng-click="env.edititable=true">Edit
                                    </button>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-default" ng-click="saveAccount(env.user)" translate
                                            ng-disabled="env.edititable!=true">Save
                                    </button>
                                </div>
                                <div class="col-md-5">
                                    <button class="btn btn-default" ng-disabled="env.user.status=='active'"
                                            ng-click="activateAccount(env.user)" translate>Activate this customer
                                    </button>
                                </div>
                                <div class="col-md-3   text-right form-inline">
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" ng-model="env.blocked_flag" ng-true-value="1"
                                                   ng-false-value="0">Activate deletion
                                        </label>
                                    </div>
                                    <button ng-click="deletedAccount(env.user)" ng-disabled="env.blocked_flag!=1"
                                            style="margin-left:20px" type="button" class="btn btn-primary" translate>
                                        Delete
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane active" ng-if="env.tab=='advs'">
                            <table class="table">
                                <tr>
                                    <th></th>
                                    <th translate>Advert ID</th>
                                    <th translate>Advert type</th>
                                    <th translate>Status</th>
                                    <th translate>Transaction code</th>
                                    <th translate>Created</th>
                                    <th translate>End on</th>
                                </tr>
                                <tr ng-repeat="adv in env.user.advs">
                                    <td><input type="checkbox" checklist-model="env.selected_advs" checklist-value="adv"></td>
                                    <td><a href="" target="_blank">{{adv.id}}</a></td>
                                    <td>
                                        {{adv.type}}
                                    </td>
                                    <td>

                                        <span ng-if="adv.status=='payment_waiting'" translate>Payment waiting</span>
                                        <span ng-if="adv.status=='active'" translate>Active</span>
                                        <span ng-if="adv.status=='disabled'" translate>Disabled</span>
                                        <span ng-if="adv.status=='expired'" translate>Expired</span>
                                        <span ng-if="adv.status=='blocked'" translate>Blocked</span>
                                        <span ng-if="adv.status=='approve_waiting'" translate>Approve waiting</span>

                                    </td>
                                    <td>-</td>
                                    <td>{{adv.CreateDateWithTime}}</td>
                                    <td>-</td>
                                </tr>
                            </table>

                            <div>
                                <div class="col-md-2">
                                    <button class="btn btn-primary" ng-click="activateSelectedAdvs(env.selected_advs)" ng-disabled="env.selected_advs.length==0" translate>Activate</button>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-primary" ng-click="blockSelectedAdvs(env.selected_advs)" ng-disabled="env.selected_advs.length==0" translate>Block</button>
                                </div>
                                <div class="col-md-2">
                                    <button class="btn btn-primary" ng-click="deleteSelectedAdvs(env.selected_advs)" ng-disabled="env.selected_advs.length==0" translate>Delete</button>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane active" ng-if="env.tab=='payment'">...</div>
                        <div role="tabpanel" class="tab-pane active" ng-if="env.tab=='history'">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Account ID</strong></div>
                                        <div class="col-md-6 text-right">{{env.user.id}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Account type</strong></div>
                                        <div class="col-md-6 text-right">
                                            <span ng-if="env.user.group_id==2" translate>Private</span>
                                            <span ng-if="env.user.group_id==3" translate>Business</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Status</strong></div>
                                        <div class="col-md-6 text-right">
                                            <span ng-if="env.user.status=='active'" translate>Active</span>
                                            <span ng-if="env.user.status=='wait_approve'"
                                                  translate>Wait for approve</span>
                                            <span ng-if="env.user.status=='blocked'" translate>Blocked</span>
                                            <span ng-if="env.user.status=='email_confirmation'" translate>Email confirmation</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Login email</strong></div>
                                        <div class="col-md-6 text-right">{{env.user.email}}</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-left"><strong translate>Created on:</strong></div>
                                        <div class="col-md-6 text-right">{{env.user.CreateDateWithTime}}</div>
                                    </div>
                                    <!--<div class="row">
                                        <div class="col-md-6 text-left"><strong translate>AGB accepted:</strong></div>
                                        <div class="col-md-6 text-right">{{env.user.CreateDateWithTime}}</div>
                                    </div>-->
                                    <hr>
                                    <div><strong translate>Status description</strong></div>
                                    <div class="row">
                                        <div class="col-md-6 text-left" translate>Waiting for email confirmation</div>
                                        <div class="col-md-6 text-right" translate>The user has to click on the activation link which he
                                            had received to his login email address</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6 text-left" translate>Waiting for approve</div>
                                        <div class="col-md-6 text-right" translate>Immo support team have to check the account details
                                            and decide to activate or to block this account</div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 text-left" translate>Active</div>
                                        <div class="col-md-6 text-right" translate>Immo support team had checked the account details
                                            and activated this account</div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 text-left" translate>Blocked</div>
                                        <div class="col-md-6 text-right" translate>Immo support team had checked the account details
                                            and blocked this account</div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="panel panel-default">
                                        <div class="panel-heading" style="height:50px">
                                            <div class="col-md-6  text-left" translate>
                                                Account history
                                            </div>
                                            <div class="col-md-6 text-right">
                                                <button class="btn btn-primary" ng-click="close()" translate>Refresh</button>
                                            </div>


                                        </div>
                                        <div class="panel-body">
                                            <table class="table">
                                                <tr>
                                                    <td>03.12.2015 – 19:56</td>
                                                    <td>SYSTEM</td>
                                                    <td>Account was created</td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>

                                </div>
                            </div>


                        </div>
                    </div>

                </div>
            </div>
        </div>


    </div>
</div>
