<div id="help-desk">
    <div class="col-md-12" ng-if="!env.user">
        <div class="panel panel-default">
            <div class="panel-heading" translate>Search accounts</div>
            <div class="panel-body">
                <form class="form-horizontal">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Account ID</label>
                                <div class="col-sm-9">
                                    <input type="number" ng-model="filter.id" class="form-control">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Company name</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.company" class="form-control">
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Register ID</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.commercial_id" class="form-control">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Email address</label>
                                <div class="col-sm-9">
                                    <input type="email" ng-model="filter.email" class="form-control">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Zip</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.address_zip" class="form-control">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>City</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.address_city" class="form-control">
                                </div>
                            </div>

                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate
                                       style="    text-align: left;">Country</label>
                                <div class="col-sm-9">
                                    <select class="form-control" ng-model="filter.commercial_country"
                                            ng-options="country as country for country in env.countries">
                                        <option value="" translate>Select country</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-12">
                                    <label class="control-label" translate>Account Type</label>
                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.group_id"
                                                   checklist-value="2">{{'Private'|translate}}
                                        </label>
                                    </div>

                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.group_id"
                                                   checklist-value="3">{{'Business'|translate}}
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-9">
                                    <label class="control-label" translate>Account status</label>


                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.status"
                                                   checklist-value="'active'">{{'Active'|translate}}
                                        </label>
                                    </div>

                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.status"
                                                   checklist-value="'email_confirmation'">{{'Email
                                            confirmation'|translate}}
                                        </label>
                                    </div>

                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.status"
                                                   checklist-value="'wait_approve'">{{'Wait for approve'|translate}}
                                        </label>
                                    </div>

                                    <div class="checkbox">
                                        <label>
                                            <input type="checkbox" checklist-model="filter.status"
                                                   checklist-value="'blocked'">{{'Blocked'|translate}}
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Forename</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.name" class="form-control">
                                </div>
                            </div>


                            <div class="form-group">
                                <label class="col-sm-3 control-label" translate>Surname</label>
                                <div class="col-sm-9">
                                    <input type="text" ng-model="filter.surname" class="form-control">
                                </div>
                            </div>


                        </div>

                        <div class="col-md-2">

                            <div class="btn-group" role="group" aria-label="...">
                                <button type="button" class="btn btn-primary" ng-click="newSearch()" translate>
                                    Search
                                </button>
                                <button type="button" class="btn btn-primary" ng-click="reset()" translate>Reset
                                    filter
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="row text-right" style="margin-bottom:10px">
                        <div class="col-md-12">
                            <div class="btn-group " role="group" aria-label="...">
                                <button type="button" class="btn btn-default" disabled translate>Results per page
                                </button>
                                <button type="button" class="btn"
                                        ng-class="{'btn-primary': env.per_page==10,'btn-default': env.per_page!=10}"
                                        ng-click="setPerPage(10)">10
                                </button>
                                <button type="button" class="btn"
                                        ng-class="{'btn-primary': env.per_page==20,'btn-default': env.per_page!=20}"
                                        ng-click="setPerPage(20)">20
                                </button>
                                <button type="button" class="btn"
                                        ng-class="{'btn-primary': env.per_page==40,'btn-default': env.per_page!=40}"
                                        ng-click="setPerPage(40)">40
                                </button>
                            </div>
                        </div>
                    </div>
                </form>

                <hr>
                <div class="progress" ng-if="env.loading==true">
                    <div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="45"
                         aria-valuemin="0" aria-valuemax="100" style="width: 100%">
                        <span class="sr-only"></span>
                    </div>
                </div>
                <table class="table" ng-if="env.loading==false">
                    <tr>
                        <th></th>
                        <th translate>Account ID</th>
                        <th translate>Account type</th>
                        <th translate>Status</th>
                        <th translate>Email address</th>
                        <th translate>Company name</th>
                        <th translate>Contact person</th>
                        <th translate>Created</th>
                    </tr>
                    <tr ng-repeat="user in env.users">
                        <td><input type="checkbox" checklist-model="env.selected" checklist-value="user"></td>
                        <td><a ng-click="setUser(user)" class="link">{{user.id}}</a></td>
                        <td>
                            <span ng-if="user.group_id==2" translate>Private</span>
                            <span ng-if="user.group_id==3" translate>Business</span>
                        </td>
                        <td>
                            <span ng-if="user.status=='active'" translate>Active</span>
                            <span ng-if="user.status=='wait_approve'" translate>Wait for approve</span>
                            <span ng-if="user.status=='blocked'" translate>Blocked</span>
                            <span ng-if="user.status=='email_confirmation'" translate>Email confirmation</span>
                        </td>
                        <td>{{user.email}}</td>
                        <td>{{user.company}}</td>
                        <td>{{user.surname}} {{user.name}}</td>
                        <td>{{user.CreateDateWithTime}}</td>
                    </tr>
                </table>


                <hr>
                <div class="row">
                    <div class="col-md-3 text-left">
                        <button type="button" class="btn btn-primary" ng-disabled="env.selected.length==0"
                                ng-click="activateSelectedAccounts()" translate>Activate
                        </button>
                    </div>

                    <div class="col-md-6">
                        <nav aria-label="Page navigation">
                            <ul class="pagination">
                                <li ng-repeat="n in range(1,env.pages)"
                                    ng-class="{'active':env.page==n}">
                                    <a class="link" ng-click="setPage(n)">{{n}}</a>
                                </li>
                            </ul>
                        </nav>
                    </div>

                    <div class="col-md-3  text-right form-inline">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" ng-model="env.blocked_flag" ng-true-value="1" ng-false-value="0">Activate
                                deletion
                            </label>
                        </div>
                        <button ng-click="deleteSelectedAccounts()"
                                ng-disabled="env.blocked_flag!=1 || env.selected.length==0" style="margin-left:20px"
                                type="button" class="btn btn-primary" translate>Delete
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="col-md-12">
        <div class="panel panel-default">
            <div class="panel-heading" style="height:40px">
                <div class="col-md-6  text-left" translate>
                    Account details
                </div>
                <div class="col-md-6 text-right">
                    <button class="btn btn-primary btn-xs" ng-click="close()" translate>Close</button>
                </div>

            </div>
            <div class="panel-body">
                <account-preview user="env.user" ng-if="env.user"></account-preview>
            </div>
        </div>


    </div>
</div>
